(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5688,e=>{"use strict";var t=e.i(55299),s=e.i(39484),r=e.i(67800);function a({title:e}){return(0,t.jsxs)("header",{className:"flex h-14 shrink-0 items-center gap-2 border-b px-4",children:[(0,t.jsx)(s.SidebarTrigger,{className:"-ml-1"}),(0,t.jsx)(r.Separator,{orientation:"vertical",className:"mr-2 h-4"}),e&&(0,t.jsx)("h1",{className:"text-lg font-semibold",children:e})]})}e.s(["Header",()=>a])},47082,20417,68027,60677,e=>{"use strict";var t=e.i(55299),s=e.i(64172);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function a({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function n({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...r})}function o({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>l,"CardDescription",()=>i,"CardFooter",()=>o,"CardHeader",()=>a,"CardTitle",()=>n],47082);let c=(0,e.i(16674).cva)("inline-flex items-center rounded-md border px-2 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-white",outline:"text-foreground",success:"border-transparent bg-green-500/15 text-green-700 dark:text-green-400",warning:"border-transparent bg-yellow-500/15 text-yellow-700 dark:text-yellow-400",error:"border-transparent bg-red-500/15 text-red-700 dark:text-red-400"}},defaultVariants:{variant:"default"}});function d({className:e,variant:r,...a}){return(0,t.jsx)("div",{"data-slot":"badge",className:(0,s.cn)(c({variant:r}),e),...a})}e.s(["Badge",()=>d],20417);var u=e.i(6146);let x=u.default.env.NEXT_PUBLIC_API_URL??"http://localhost:8000";class m extends Error{status;statusText;constructor(e,t,s){super(s),this.status=e,this.statusText=t,this.name="ApiError"}}async function h(e,t={}){let{params:s,...r}=t,a=`${x}${e}`;if(s){let e=new URLSearchParams(s);a+=`?${e.toString()}`}let n=await fetch(a,{...r,headers:{"Content-Type":"application/json",...r.headers}});if(!n.ok){let e=await n.text().catch(()=>n.statusText);throw new m(n.status,n.statusText,e)}let i=await n.text();return i?JSON.parse(i):{}}e.s(["api",0,{health:()=>h("/health"),projects:{list:()=>h("/api/projects"),listWithStats:()=>h("/api/projects?include_stats=true"),get:e=>h(`/api/projects/${e}`),getWithStats:e=>h(`/api/projects/${e}?include_stats=true`),create:e=>h("/api/projects",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>h(`/api/projects/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>h(`/api/projects/${e}`,{method:"DELETE"})},tasks:{list:e=>h("/api/tasks",{params:e?{projectId:e}:void 0}),listByProject:e=>h(`/api/projects/${e}/tasks`),get:e=>h(`/api/tasks/${e}`),create:e=>h("/api/tasks",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>h(`/api/tasks/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>h(`/api/tasks/${e}`,{method:"DELETE"}),reorder:(e,t)=>h(`/api/projects/${e}/tasks/reorder`,{method:"POST",body:JSON.stringify({taskIds:t})}),skip:e=>h(`/api/tasks/${e}/skip`,{method:"POST"})},sessions:{list:e=>h("/api/sessions",{params:e?{projectId:e}:void 0}),get:e=>h(`/api/sessions/${e}`),start:e=>h("/api/sessions",{method:"POST",body:JSON.stringify({projectId:e})}),pause:e=>h(`/api/sessions/${e}/pause`,{method:"POST"}),resume:e=>h(`/api/sessions/${e}/resume`,{method:"POST"}),stop:e=>h(`/api/sessions/${e}/stop`,{method:"POST"})},orchestration:{run:(e,t)=>h("/api/orchestration/run",{method:"POST",body:JSON.stringify({projectId:e,...t})}),status:e=>h(`/api/orchestration/status/${e}`)}}],68027);var f=e.i(49057);let j=u.default.env.NEXT_PUBLIC_WS_URL??"ws://localhost:8000";function p({endpoint:e,onMessage:t,onStatusChange:s,autoReconnect:r=!0,reconnectInterval:a=3e3,maxReconnectAttempts:n=5}){let i=(0,f.useRef)(null),l=(0,f.useRef)(0),o=(0,f.useRef)(null),c=(0,f.useRef)(!0),[d,u]=(0,f.useState)("disconnected"),x=(0,f.useRef)(t),m=(0,f.useRef)(s);return(0,f.useEffect)(()=>{x.current=t},[t]),(0,f.useEffect)(()=>{m.current=s},[s]),(0,f.useEffect)(()=>{function t(e){c.current&&(u(e),m.current?.(e))}return c.current=!0,!function s(){if(i.current?.readyState!==WebSocket.OPEN){t("connecting");try{let d=new WebSocket(`${j}${e}`);i.current=d,d.onopen=()=>{l.current=0,t("connected")},d.onmessage=e=>{try{let t=JSON.parse(e.data);x.current?.(t)}catch{console.error("Failed to parse WebSocket message:",e.data)}},d.onerror=()=>{t("error")},d.onclose=()=>{t("disconnected"),i.current=null,c.current&&r&&l.current<n&&(l.current+=1,o.current=setTimeout(()=>{c.current&&s()},a))}}catch{t("error")}}}(),()=>{c.current=!1,o.current&&(clearTimeout(o.current),o.current=null),i.current?.close(),i.current=null}},[e,r,a,n]),{status:d,connect:function(){i.current?.readyState!==WebSocket.OPEN&&(l.current=0,i.current?.close())},disconnect:function(){o.current&&(clearTimeout(o.current),o.current=null),l.current=n,i.current?.close(),i.current=null},send:function(e){i.current?.readyState===WebSocket.OPEN&&i.current.send(JSON.stringify(e))}}}e.s(["useWebSocket",()=>p],60677)},42336,e=>{"use strict";var t=e.i(55299),s=e.i(49057),r=e.i(5688),a=e.i(47082),n=e.i(20417),i=e.i(28435),l=e.i(64172),o=e.i(69636);function c({project:e,onStartAutopilot:s,className:r}){let c=e.taskCounts.pending+e.taskCounts.inProgress+e.taskCounts.completed+e.taskCounts.failed;return(0,t.jsxs)(a.Card,{className:(0,l.cn)("flex flex-col",r),children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(a.CardTitle,{className:"text-base truncate",title:e.name,children:e.name}),e.currentBranch&&(0,t.jsx)(a.CardDescription,{className:"truncate mt-1",title:e.currentBranch,children:(0,t.jsx)("span",{className:"font-mono text-xs",children:e.currentBranch})})]}),(0,t.jsx)(n.Badge,{variant:function(e){switch(e){case"active":return"success";case"idle":default:return"secondary";case"error":return"error"}}(e.status),children:e.status})]})}),(0,t.jsxs)(a.CardContent,{className:"flex-1 pb-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,t.jsxs)("div",{className:"rounded-md bg-muted/50 p-2",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-yellow-600 dark:text-yellow-400",children:e.taskCounts.pending}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Pending"})]}),(0,t.jsxs)("div",{className:"rounded-md bg-muted/50 p-2",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:e.taskCounts.inProgress}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"In Progress"})]}),(0,t.jsxs)("div",{className:"rounded-md bg-muted/50 p-2",children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:e.taskCounts.completed}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Completed"})]})]}),e.taskCounts.failed>0&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:[e.taskCounts.failed," failed task",1!==e.taskCounts.failed?"s":""]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-between text-xs text-muted-foreground",children:[(0,t.jsx)("span",{children:"Last activity"}),(0,t.jsx)("span",{children:function(e){if(!e)return"Never";let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:s<604800?`${Math.floor(s/86400)}d ago`:t.toLocaleDateString()}(e.lastActivity??e.updatedAt)})]}),c>0&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[e.taskCounts.completed,"/",c," tasks"]})]}),(0,t.jsx)("div",{className:"h-1.5 w-full rounded-full bg-muted overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${e.taskCounts.completed/c*100}%`}})})]})]}),(0,t.jsxs)(a.CardFooter,{className:"gap-2 pt-0",children:[(0,t.jsx)(o.Button,{asChild:!0,variant:"outline",size:"sm",className:"flex-1",children:(0,t.jsx)(i.default,{href:`/projects/${e.id}`,children:"Open"})}),(0,t.jsx)(o.Button,{variant:"default",size:"sm",className:"flex-1",onClick:()=>s?.(e.id),disabled:"active"===e.status,children:"active"===e.status?"Running":"Start Autopilot"})]})]})}var d=e.i(32231),u=e.i(89506);function x({className:e}){return(0,t.jsxs)("svg",{className:e,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("rect",{x:"3",y:"3",width:"7",height:"7"}),(0,t.jsx)("rect",{x:"14",y:"3",width:"7",height:"7"}),(0,t.jsx)("rect",{x:"14",y:"14",width:"7",height:"7"}),(0,t.jsx)("rect",{x:"3",y:"14",width:"7",height:"7"})]})}function m({className:e}){return(0,t.jsxs)("svg",{className:e,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),(0,t.jsx)("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),(0,t.jsx)("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),(0,t.jsx)("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),(0,t.jsx)("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),(0,t.jsx)("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]})}function h({className:e}){return(0,t.jsxs)("svg",{className:e,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("circle",{cx:"11",cy:"11",r:"8"}),(0,t.jsx)("path",{d:"m21 21-4.3-4.3"})]})}function f({viewMode:e}){return"grid"===e?(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,s)=>(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(u.Skeleton,{className:"h-5 w-32"}),(0,t.jsx)(u.Skeleton,{className:"h-3 w-24 mt-2"})]}),(0,t.jsx)(u.Skeleton,{className:"h-5 w-14"})]})}),(0,t.jsxs)(a.CardContent,{className:"pb-3",children:[(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[1,2,3].map(e=>(0,t.jsx)(u.Skeleton,{className:"h-14"},e))}),(0,t.jsx)(u.Skeleton,{className:"h-3 w-full mt-4"})]}),(0,t.jsxs)("div",{className:"flex gap-2 px-6 pb-6",children:[(0,t.jsx)(u.Skeleton,{className:"h-8 flex-1"}),(0,t.jsx)(u.Skeleton,{className:"h-8 flex-1"})]})]},s))}):(0,t.jsx)("div",{className:"flex flex-col gap-2",children:Array.from({length:6}).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[(0,t.jsx)(u.Skeleton,{className:"h-5 w-40"}),(0,t.jsx)(u.Skeleton,{className:"h-5 w-20"}),(0,t.jsx)(u.Skeleton,{className:"h-4 w-16 ml-auto"}),(0,t.jsx)(u.Skeleton,{className:"h-4 w-24"}),(0,t.jsx)(u.Skeleton,{className:"h-8 w-16"}),(0,t.jsx)(u.Skeleton,{className:"h-8 w-24"})]},s))})}function j({searchQuery:e,statusFilter:s}){return(0,t.jsx)(a.Card,{className:"py-12",children:(0,t.jsxs)(a.CardContent,{className:"flex flex-col items-center justify-center text-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-muted p-4 mb-4",children:(0,t.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:(0,t.jsx)("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})})}),e||"all"!==s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"No matching projects"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm",children:"No projects match your current search or filters. Try adjusting your criteria."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"No projects yet"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm mb-4",children:"Get started by creating your first project or initializing an existing directory."}),(0,t.jsx)(o.Button,{asChild:!0,children:(0,t.jsx)(i.default,{href:"/projects/new",children:"Create Project"})})]})]})})}function p({project:e,onStartAutopilot:s}){let r=e.taskCounts.pending+e.taskCounts.inProgress+e.taskCounts.completed+e.taskCounts.failed;return(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium truncate",children:e.name}),e.currentBranch&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground font-mono truncate",children:e.currentBranch})]})}),(0,t.jsx)(n.Badge,{variant:function(e){switch(e){case"active":return"success";case"idle":default:return"secondary";case"error":return"error"}}(e.status),className:"shrink-0",children:e.status}),(0,t.jsxs)("div",{className:"hidden sm:flex items-center gap-4 text-sm text-muted-foreground shrink-0",children:[(0,t.jsxs)("span",{className:"text-yellow-600 dark:text-yellow-400",children:[e.taskCounts.pending," pending"]}),(0,t.jsxs)("span",{className:"text-blue-600 dark:text-blue-400",children:[e.taskCounts.inProgress," in progress"]}),(0,t.jsxs)("span",{className:"text-green-600 dark:text-green-400",children:[e.taskCounts.completed,"/",r]})]}),(0,t.jsx)("span",{className:"hidden md:block text-xs text-muted-foreground shrink-0",children:function(e){if(!e)return"Never";let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:s<604800?`${Math.floor(s/86400)}d ago`:t.toLocaleDateString()}(e.lastActivity??e.updatedAt)}),(0,t.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[(0,t.jsx)(o.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,t.jsx)(i.default,{href:`/projects/${e.id}`,children:"Open"})}),(0,t.jsx)(o.Button,{variant:"default",size:"sm",onClick:()=>s?.(e.id),disabled:"active"===e.status,children:"active"===e.status?"Running":"Autopilot"})]})]})}function g({projects:e,isLoading:r,error:n,onStartAutopilot:i}){let[l,u]=(0,s.useState)("grid"),[g,N]=(0,s.useState)(""),[k,v]=(0,s.useState)("all"),y=(0,s.useMemo)(()=>e.filter(e=>{let t=""===g||e.name.toLowerCase().includes(g.toLowerCase())||e.path.toLowerCase().includes(g.toLowerCase()),s="all"===k||e.status===k;return t&&s}),[e,g,k]),b=(0,s.useMemo)(()=>({all:e.length,active:e.filter(e=>"active"===e.status).length,idle:e.filter(e=>"idle"===e.status).length,error:e.filter(e=>"error"===e.status).length}),[e]);return n?(0,t.jsx)(a.Card,{className:"py-12",children:(0,t.jsxs)(a.CardContent,{className:"flex flex-col items-center justify-center text-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-red-100 dark:bg-red-900/30 p-4 mb-4",children:(0,t.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-red-600 dark:text-red-400",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,t.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]})}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-1",children:"Failed to load projects"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm",children:n})]})}):(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(h,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)(d.Input,{type:"search",placeholder:"Search projects...",value:g,onChange:e=>N(e.target.value),className:"pl-9"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 sm:pb-0",children:["all","active","idle","error"].map(e=>(0,t.jsxs)(o.Button,{variant:k===e?"default":"outline",size:"sm",onClick:()=>v(e),className:"shrink-0",children:[e.charAt(0).toUpperCase()+e.slice(1),(0,t.jsxs)("span",{className:"ml-1 text-xs opacity-70",children:["(",b[e],")"]})]},e))}),(0,t.jsxs)("div",{className:"flex items-center border rounded-md",children:[(0,t.jsx)(o.Button,{variant:"grid"===l?"secondary":"ghost",size:"icon-sm",onClick:()=>u("grid"),"aria-label":"Grid view",className:"rounded-r-none",children:(0,t.jsx)(x,{})}),(0,t.jsx)(o.Button,{variant:"list"===l?"secondary":"ghost",size:"icon-sm",onClick:()=>u("list"),"aria-label":"List view",className:"rounded-l-none",children:(0,t.jsx)(m,{})})]})]}),r&&(0,t.jsx)(f,{viewMode:l}),!r&&0===y.length&&(0,t.jsx)(j,{searchQuery:g,statusFilter:k}),!r&&y.length>0&&(0,t.jsx)(t.Fragment,{children:"grid"===l?(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:y.map(e=>(0,t.jsx)(c,{project:e,onStartAutopilot:i},e.id))}):(0,t.jsx)("div",{className:"flex flex-col gap-2",children:y.map(e=>(0,t.jsx)(p,{project:e,onStartAutopilot:i},e.id))})}),!r&&e.length>0&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",y.length," of ",e.length," project",1!==e.length?"s":""]})]})}var N=e.i(68027),k=e.i(60677);function v(){let{projects:e,isLoading:i,error:l,wsStatus:o}=function(){let[e,t]=(0,s.useState)([]),[r,a]=(0,s.useState)(!0),[n,i]=(0,s.useState)(null),l=(0,s.useCallback)(async()=>{try{a(!0),i(null);let e=await N.api.projects.listWithStats();t(e)}catch(e){i(e instanceof Error?e.message:"Failed to fetch projects")}finally{a(!1)}},[]),o=(0,s.useCallback)(e=>{if("project_update"!==e.type)return;let{action:s,projectId:r,project:a}=e.payload;t(e=>{switch(s){case"created":if(a)return[...e,a];return e;case"updated":case"status_changed":if(a)return e.map(e=>e.id===r?a:e);return e;case"deleted":return e.filter(e=>e.id!==r);default:return e}})},[]),{status:c}=(0,k.useWebSocket)({endpoint:"/ws/projects",onMessage:o});return(0,s.useEffect)(()=>{l()},[l]),{projects:e,isLoading:r,error:n,wsStatus:c,refetch:l}}(),c={activeProjects:e.filter(e=>"active"===e.status).length,totalProjects:e.length,pendingTasks:e.reduce((e,t)=>e+t.taskCounts.pending,0),inProgressTasks:e.reduce((e,t)=>e+t.taskCounts.inProgress,0),completedTasks:e.reduce((e,t)=>e+t.taskCounts.completed,0),failedTasks:e.reduce((e,t)=>e+t.taskCounts.failed,0)},d=(0,s.useCallback)(async e=>{try{await N.api.orchestration.run(e)}catch(e){console.error("Failed to start autopilot:",e)}},[]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Header,{title:"Dashboard"}),(0,t.jsxs)("main",{className:"flex flex-1 flex-col gap-4 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Overview"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Real-time"}),function(e){switch(e){case"connected":return(0,t.jsx)(n.Badge,{variant:"success",children:"Live"});case"connecting":return(0,t.jsx)(n.Badge,{variant:"warning",children:"Connecting"});case"error":return(0,t.jsx)(n.Badge,{variant:"error",children:"Error"});default:return(0,t.jsx)(n.Badge,{variant:"secondary",children:"Offline"})}}(o)]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium",children:"Active Projects"}),(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:(0,t.jsx)("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})})]}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:c.activeProjects}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[c.totalProjects," total project",1!==c.totalProjects?"s":""]})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium",children:"Pending Tasks"}),(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-500",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("polyline",{points:"12 6 12 12 16 14"})]})]}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:c.pendingTasks}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[c.inProgressTasks," in progress"]})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium",children:"Completed Tasks"}),(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-500",children:[(0,t.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,t.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})]}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:c.completedTasks}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:c.failedTasks>0?`${c.failedTasks} failed`:"All successful"})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(a.CardTitle,{className:"text-sm font-medium",children:"Success Rate"}),(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-muted-foreground",children:[(0,t.jsx)("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),(0,t.jsx)("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),(0,t.jsx)("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]})]}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:c.completedTasks+c.failedTasks>0?`${Math.round(c.completedTasks/(c.completedTasks+c.failedTasks)*100)}%`:"N/A"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[c.completedTasks+c.failedTasks," total completed"]})]})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Projects"}),(0,t.jsx)(g,{projects:e,isLoading:i,error:l,onStartAutopilot:d})]})]})]})}e.s(["default",()=>v],42336)}]);