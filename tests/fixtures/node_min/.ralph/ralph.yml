# Ralph Configuration - Node.js Minimal Fixture
# Used for integration testing of the Ralph orchestrator

version: "1"

task_source:
  type: prd_json
  path: .ralph/prd.json

gates:
  build:
    - name: syntax
      cmd: "node --check src/index.js"
      when: package.json
      timeout_seconds: 30
      fatal: true

  full:
    - name: test
      cmd: "npm test"
      when: package.json
      timeout_seconds: 120
      fatal: true

    - name: lint
      cmd: "npm run lint"
      when: package.json
      timeout_seconds: 60
      fatal: false

test_paths:
  - "**/*.test.js"
  - "**/*.spec.js"
  - "__tests__/**"

agents:
  implementation:
    model: mock-model
    timeout: 300
  test_writing:
    model: mock-model
    timeout: 300
    allowed_tools:
      - Read
      - Write
      - Glob
      - LS
  review:
    model: mock-model
    timeout: 300
    allowed_tools:
      - Read
      - Glob
      - LS

git:
  base_branch: main

limits:
  max_iterations: 5
  claude_timeout: 300
